/* Reset */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html,
body {
    height: 100%;
    background: #000;
    color: #fff;
    overflow: hidden;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* Bottone iniziale: piccolo, senza cerchio */
.key-btn {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    padding: clamp(6px, 0.9vw, 10px) clamp(8px, 1.2vw, 12px);
    background: transparent;
    color: #fff;
    font-size: clamp(24px, 6vw, 40px);
    border: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform .12s ease, opacity .25s ease;
    z-index: 9999;
}

.key-btn:hover {
    transform: translate(-50%, -50%) scale(1.04);
}

.key-btn:active {
    transform: translate(-50%, -50%) scale(0.98);
}

.key-btn.hidden {
    opacity: 0;
    pointer-events: none;
}

/* Palco video */
.stage {
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100dvh;
    min-height: 100vh;
    background: #000 url('img/dc-desktop.jpg') center / cover no-repeat;
    display: grid;
    place-items: center;
    opacity: 0;
    /* inattivo finchÃ© non si clicca la chiave */
    pointer-events: none;
    transition: opacity .3s ease;
    z-index: 0;
}

.stage.active {
    opacity: 1;
    pointer-events: auto;
}

/* Video base */
.vid {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    /* default (v1) */
    background: transparent;
    pointer-events: none;
    user-select: none;
    -webkit-user-drag: none;
    opacity: 0;
    transition: opacity 0.8s linear;
    z-index: 1;
}

/* Stack / adattamenti */
.v1 {
    z-index: 2;
}

/* cover */
.v2 {
    z-index: 1;
    object-fit: contain;
    background: transparent;
}

.v3 {
    z-index: 3;
    object-fit: contain;
    background: transparent;
}

/* Stati */
.show {
    opacity: 1;
}

.hide {
    opacity: 0;
}

/* Fade-out lungo di v1: 5s finali */
.fade-long {
    transition: opacity 5s linear;
    opacity: 0;
}

/* Skip glass (su v2) */
.skip-btn {
    position: absolute;
    right: calc(env(safe-area-inset-right, 0px) + 14px);
    bottom: calc(env(safe-area-inset-bottom, 0px) + 14px);
    padding: 6px 18px;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.158);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.185), rgba(255, 255, 255, 0.289));
    color: #ffffff;
    letter-spacing: .3px;
    font-size: clamp(10px, 1.3vw, 12px);
    text-shadow: 0 1px 1px rgba(0, 0, 0, .25);
    backdrop-filter: blur(18px) saturate(160%);
    -webkit-backdrop-filter: blur(18px) saturate(160%);
    box-shadow:
        0 8px 24px rgba(0, 0, 0, .40),
        inset 0 1px 0 rgba(255, 255, 255, .35),
        inset 0 -1px 0 rgba(255, 255, 255, .10);
    cursor: pointer;
    opacity: 0;
    pointer-events: none;
    transition: opacity .35s ease, transform .18s ease, background .2s ease, box-shadow .2s ease;
    z-index: 10;
    overflow: hidden;
}

.skip-btn::before {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    height: 55%;
    background: linear-gradient(180deg, rgba(255, 255, 255, .35), rgba(255, 255, 255, 0));
    pointer-events: none;
}

.skip-btn.show {
    opacity: 1;
    pointer-events: all;
}

.skip-btn:hover {
    transform: translateY(-0.1rem);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.149));
}

.skip-btn:active {
    transform: translateY(0) scale(.98);
}

/* Banner su v2 (basso-sinistra, molto vicino al bordo) */
.v2-banner {
    position: absolute;
    left: calc(env(safe-area-inset-left, 0px) + 6px);
    bottom: calc(env(safe-area-inset-bottom, 0px) + 6px);
    padding: 5px 8px;
    font-size: clamp(9px, 1.1vw, 11px);
    line-height: 1;
    color: #eaeaea;
    background: rgba(0, 0, 0, .55);
    border: 1px solid rgba(255, 255, 255, .14);
    border-radius: 7px;
    opacity: 0;
    pointer-events: none;
    transition: opacity .3s ease;
    z-index: 11;
}

.v2-banner.show {
    opacity: 1;
}

/* ===== Notifica su v3 (a 01:20) ===== */
.notify {
    position: absolute;
    left: 50%;
    top: 50%;
    width: clamp(320px, 60vw, 720px);
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0;
    pointer-events: none;
    transition: transform .25s ease, opacity .25s ease;
    will-change: transform, opacity;
    z-index: 100;
    
    --btn-size: clamp(125px, 10vw, 150px);
    --btn-gap: 80px;
    --btn-offset: clamp(12px, 2vw, 20px);
    cursor: default;
}

.notify.show {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
    pointer-events: auto;
}

.notify-card {
    position: relative;
    width: 100%;
    height: auto;
    display: block;
    user-select: none;
    -webkit-user-drag: none;
    z-index: 1;
    pointer-events: none;
    cursor: default;
}

/* Bottoni: sopra la card, ancorati al fondo della notifica */
.notify-btn {
    position: absolute;
    top: 260px;
    width: var(--btn-size);
    border: none;
    background: transparent;
    padding: 0;
    z-index: 2;
    pointer-events: none;
    cursor: default;
    transition: transform .15s ease;
    -webkit-tap-highlight-color: transparent;
}

.notify.show .notify-btn {
    pointer-events: auto;
    cursor: pointer;
}

.notify-btn img {
    width: 100%;
    height: auto;
    /* no stretch */
    display: block;
    user-select: none;
    -webkit-user-drag: none;
}

/* Posizionamento orizzontale */
.notify-btn.yes {
    left: calc(51% - var(--btn-size) - var(--btn-gap)/2);
}

.notify-btn.no {
    left: calc(49% + var(--btn-gap)/2);
}

/* Feedback e focus */
.notify-btn:hover {
    transform: translateY(-3px);
}

.notify-btn:active {
    transform: translateY(0) scale(.98);
}

.notify-btn:focus {
    outline: none;
}

.notify-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, .6);
    border-radius: 8px;
}

/* Loader GIF centrata sopra i video ma sotto la notifica */
.loader{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 2%;
  height: auto;
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease;
  z-index: 60; /* > video (1..3), < notify (100) */
}
.loader.show{ opacity: 1; }