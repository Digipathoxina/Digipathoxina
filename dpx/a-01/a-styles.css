/* ===== Base ===== */
html, body {
  height: 100%;
  margin: 0;
  background: #111;
  overflow: hidden;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.pill-section { position: fixed; inset: 0; }

/* Noise */
.pill-section .noise-canvas {
  position: fixed; inset: 0; z-index: 1; pointer-events: none;
}

/* Pill */
.pill-section .pill-img {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: clamp(54px, 10vmin, 118px); height: auto; cursor: pointer;
  z-index: 8; transition: transform .2s ease;
}
.pill-section .pill-img:hover {
  transform: translate(-50%, calc(-50% - 6px));
}

/* Lang switch */
#lang-switch {
  position: fixed; top: 12px; right: 12px; z-index: 10;
  display: none; opacity: 0; gap: 6px; padding: 6px; border-radius: 10px;
  color: #fff; background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.22);
  backdrop-filter: blur(4px);
  transition: opacity .25s ease;
}
#lang-switch.show { display: flex; opacity: .65; }
#lang-switch:hover { opacity: .85; }
#lang-switch .lang {
  min-width: 38px; height: 28px; padding: 0 8px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.28);
  border-radius: 6px; color: #fff;
  font-size: 12px; font-weight: 700; letter-spacing: .08em;
  text-transform: uppercase;
  cursor: pointer;
  transition: background .15s ease, border-color .15s ease, transform .15s ease;
}
#lang-switch .lang:hover {
  transform: translateY(-1px);
  background: rgba(255,255,255,.12);
  border-color: rgba(255,255,255,.4);
}
#lang-switch .lang.active {
  background: rgba(255,255,255,.2);
  border-color: rgba(255,255,255,.55);
}

/* Hover assets */
.pill-section .hover-name,
.pill-section .hover-info {
  position: fixed; top: 0; left: 0; display: none; opacity: 0;
  transition: opacity .35s ease; pointer-events: none; z-index: 9;
  filter: drop-shadow(0 10px 30px rgba(0,0,0,.45));
  user-select: none; will-change: opacity, transform;
}
.pill-section .hover-name { width: clamp(150px, 26vmin, 320px); }
.pill-section .hover-info { width: clamp(300px, 34vmin, 640px); }

/* ===== Esperienza A ===== */
.a-exp {
  position: fixed; inset: 0;
  background: #fff;             /* <<< il “colore di arrivo” */
  overflow: hidden;
}
.a-exp.fade-out { opacity: 0; transition: opacity var(--fade-ms, 900ms) ease; }

/* Video sotto (z:1) */
.a-exp video.a-video {
  position: absolute; inset: 0;
  width: 100%; height: 100%; object-fit: cover;
  z-index: 1;
  background: #ffffff;
}

/* Testo: ora appare con il GLB (classe .show) */
.a-exp .a-text {
  position: absolute;
  bottom: 20px;
  left: 20px;
  width: auto;
  max-width: 30%;
  z-index: 3;              /* sopra il GLB */
  color: #ffffff00;        /* come da tua modifica */
  font-size: 15px;
  font-family:"Anonymous Pro", monospace; 
  user-select: text;
  pointer-events: auto;
  opacity: 0;              /* nascosto di default */
  transition: opacity 1.5s ease; /* fade-in */
}
.a-exp .a-text.show {
  opacity: 1;              /* visibile quando il GLB appare */
}

/* GLB (z:2) */
.a-exp model-viewer.a-model {
  position: absolute;
  top: 0; right: 0; bottom: 0; left: 0;
  margin: auto;
  width: 70%;
  height: 70%;
  z-index: 2;

  --poster-color: transparent;
  --progress-bar-color: transparent;

  pointer-events: auto;
  opacity: 0;
  transition: opacity 3s ease;
  transform-origin: center;
}
.a-exp model-viewer.a-model.show { opacity: 1; }

/* Overlay per dissolve finale (bianco) */
.a-exp .black-overlay {
  position: absolute; inset: 0;
  background: #fff;
  opacity: 0; z-index: 4;
  pointer-events: none;
  transition: opacity var(--fade-ms, 900ms) ease;
}
.a-exp .black-overlay.on { opacity: 1; }

/* <<< NUOVO: overlay iniziale nero che svanisce mostrando il bianco dietro */
.a-exp .white-fade {
  position: absolute; inset: 0;
  background: #000000;           /* parte nero */
  z-index: 5;                 /* sopra a tutto all’inizio */
  opacity: 1;                 /* pieno all'inizio */
  pointer-events: none;
  transition: opacity 4s ease; /* regola la durata della transizione */
}
.a-exp .white-fade.off {
  opacity: 0;                 /* diventa trasparente (rimane il bianco di .a-exp) */
}
